{"version":3,"sources":["webpack:///./src/components/ui/AppPage.vue","webpack:///./src/components/ui/AppPage.vue?948e","webpack:///./src/utils/currency.js","webpack:///./node_modules/core-js/modules/es.string.sub.js","webpack:///./node_modules/core-js/internals/create-html.js","webpack:///./node_modules/core-js/internals/string-html-forced.js","webpack:///./src/views/Cart.vue","webpack:///./src/components/user/UserAuthForm.vue","webpack:///./src/components/user/UserAuthForm.vue?c852","webpack:///./src/use/cart-page.js","webpack:///./src/utils/pay.js","webpack:///./src/views/Cart.vue?e0a5","webpack:///./src/use/product-cart.js"],"names":["class","back","to","center","title","props","type","String","required","Boolean","default","setup","document","__exports__","render","formatter","Intl","NumberFormat","currency","style","value","format","$","createHTML","forcedStringHTMLMethod","target","proto","forced","sub","this","requireObjectCoercible","toString","quot","module","exports","string","tag","attribute","S","p1","replace","fails","METHOD_NAME","test","toLowerCase","split","length","isEmpty","cart","key","add","disabled","count","price","total","isAuth","onPay","for","login","id","email","password","signUp","store","dispatch","useCartPage","useStore","products","computed","getters","find","p","Object","keys","reduce","acc","pay","amount","description","accountId","data","widget","cp","CloudPayments","Promise","resolve","reject","publicId","skin","onSuccess","options","onFail","reason","loading","router","user","push","name","console","log","components","AppPage","UserAuthForm","useProductCart","defaultId","prodId","commit"],"mappings":"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","file":"js/chunk-30e8c609.702263ae.js","sourcesContent":["<template>\n  <div class=\"breadcrumbs\" v-if=\"back\">\n    <router-link to=\"/\" class=\"text-white\">Zurück zu Produkten</router-link>\n  </div>\n  <div :class=\"['card', {center}]\">\n    <h1 class=\"card-title\">\n      <span v-once>{{title}}</span>\n      <slot name=\"header\" />\n    </h1>\n\n    <slot />\n  </div>\n</template>\n\n<script>\nexport default {\n  props: {\n    title: {\n      type: String,\n      required: true\n    },\n    back: {\n      type: Boolean,\n      default: false\n    },\n    center: {\n      type: Boolean,\n      default: false\n    }\n  },\n  setup(props) {\n    if (props.title) {\n      document.title = `${props.title} | Vue Лавка`\n    }\n  }\n}\n</script>\n\n<style scoped>\n\n</style>","import { render } from \"./AppPage.vue?vue&type=template&id=6bb93b38\"\nimport script from \"./AppPage.vue?vue&type=script&lang=js\"\nexport * from \"./AppPage.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/wendelin/Documents/Projekte/vue3-shop-demo/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","const formatter = new Intl.NumberFormat('de-DE', { currency: 'EUR', style: 'currency' })\n\nexport function currency(value) {\n    return formatter.format(value)\n}","'use strict';\nvar $ = require('../internals/export');\nvar createHTML = require('../internals/create-html');\nvar forcedStringHTMLMethod = require('../internals/string-html-forced');\n\n// `String.prototype.sub` method\n// https://tc39.es/ecma262/#sec-string.prototype.sub\n$({ target: 'String', proto: true, forced: forcedStringHTMLMethod('sub') }, {\n  sub: function sub() {\n    return createHTML(this, 'sub', '', '');\n  }\n});\n","var requireObjectCoercible = require('../internals/require-object-coercible');\nvar toString = require('../internals/to-string');\n\nvar quot = /\"/g;\n\n// `CreateHTML` abstract operation\n// https://tc39.es/ecma262/#sec-createhtml\nmodule.exports = function (string, tag, attribute, value) {\n  var S = toString(requireObjectCoercible(string));\n  var p1 = '<' + tag;\n  if (attribute !== '') p1 += ' ' + attribute + '=\"' + toString(value).replace(quot, '&quot;') + '\"';\n  return p1 + '>' + S + '</' + tag + '>';\n};\n","var fails = require('../internals/fails');\n\n// check the existence of a method, lowercase\n// of a tag and escaping quotes in arguments\nmodule.exports = function (METHOD_NAME) {\n  return fails(function () {\n    var test = ''[METHOD_NAME]('\"');\n    return test !== test.toLowerCase() || test.split('\"').length > 3;\n  });\n};\n","<template>\n  <app-page title=\"Warenkorb\">\n    <h3 class=\"text-center\" v-if=\"isEmpty\">Warenkorb ist Leer</h3>\n    <template v-else>\n      <table class=\"table\">\n        <thead>\n        <tr>\n          <th>Produktname</th>\n          <th>Anzahl</th>\n          <th>Preis (stück)</th>\n        </tr>\n        </thead>\n        <tbody>\n        <tr v-for=\"(value, key) in cart\" :key=\"key\">\n          <td>{{title(key)}}</td>\n          <td>\n            <button class=\"btn danger\" @click=\"sub(key)\">-</button>\n            {{value}} stück.\n            <button class=\"btn primary\" @click.stop=\"add(key)\" :disabled=\"value >= count(key)\">+</button>\n          </td>\n          <td>{{price(key)}}</td>\n        </tr>\n        </tbody>\n      </table>\n      <hr>\n      <p class=\"text-right\"><strong>Gesamt: {{currency(total)}}</strong></p>\n      <p class=\"text-right\" v-if=\"isAuth && !isEmpty\">\n        <button class=\"btn\" @click=\"onPay\">Bezahlen</button>\n      </p>\n      <UserAuthForm v-else />\n    </template>\n  </app-page>\n</template>\n\n<script>\nimport {onMounted, ref, computed} from 'vue'\nimport {useStore} from 'vuex'\nimport UserAuthForm from '../components/user/UserAuthForm'\nimport AppPage from '../components/ui/AppPage'\nimport {useProductCart} from '../use/product-cart'\nimport {useCartPage} from '../use/cart-page'\nimport {pay} from '../utils/pay'\nimport {currency} from '../utils/currency'\nimport {useRouter} from 'vue-router'\n\nexport default {\n  setup() {\n    const loading = ref(true)\n    const store = useStore()\n    const router = useRouter()\n    const {add, sub} = useProductCart()\n    const {total} = useCartPage()\n\n    onMounted(async () => {\n      await store.dispatch('product/load')\n      loading.value = false\n    })\n\n    const user = computed(() => store.getters['auth/user'])\n    const isAuth = computed(() => store.getters['auth/isAuthenticated'])\n\n    const onPay = async () => {\n      try {\n        await pay({\n          description: 'Покупка товаров в онлайн магазине',\n          amount: total.value,\n          accountId: user.value.email,\n          data: {\n            test: 1\n          }\n        })\n        await store.dispatch('order/create')\n        router.push({name: 'Thanks'})\n      } catch (e) {\n        console.log('Reject pay: ', e)\n      }\n    }\n\n    return {\n      ...useCartPage(),\n      add,\n      sub,\n      isAuth,\n      loading,\n      onPay,\n      currency\n    }\n  },\n  components: {AppPage, UserAuthForm}\n}\n</script>\n\n<style scoped>\n\n</style>","<template>\n  <form @submit.prevent=\"login\">\n    <h4>Um ihren Einkauf abzuschließen<br>Bitte melden Sie sich an oder erstellen Sie zunächst ein neues Konto.</h4>\n    <h4 style=\"color:red;\">Diese Funktion ist deaktiviert</h4>\n\n    <div class=\"form-control\">\n      <label for=\"email\">Email</label>\n      <input :disabled=\"true\" type=\"email\" id=\"email\" v-model=\"email\">\n    </div>\n\n    <div class=\"form-control\">\n      <label for=\"password\">Password</label>\n      <input :disabled=\"true\" type=\"password\" id=\"password\" v-model=\"password\">\n    </div>\n\n    <button class=\"btn primary\" type=\"submit\" :disabled=\"true\">Login</button>\n    <button class=\"btn\" type=\"button\" @click=\"signUp\" :disabled=\"true\">Registrieren</button>\n  </form>\n</template>\n\n<script>\nimport {ref} from 'vue'\nimport {useStore} from 'vuex'\n\nexport default {\n  setup() {\n    const store = useStore()\n    const email = ref('')\n    const password = ref('')\n\n    const login = async () => {\n      await store.dispatch('auth/login', {\n        email: email.value,\n        password: password.value\n      })\n    }\n\n    const signUp = async () => {\n      await store.dispatch('auth/signUp', {\n        email: email.value,\n        password: password.value\n      })\n    }\n\n    return {\n      email,\n      password,\n      login,\n      signUp\n    }\n  }\n}\n</script>\n\n<style scoped>\n\n</style>","import { render } from \"./UserAuthForm.vue?vue&type=template&id=004973e7\"\nimport script from \"./UserAuthForm.vue?vue&type=script&lang=js\"\nexport * from \"./UserAuthForm.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/wendelin/Documents/Projekte/vue3-shop-demo/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import {computed} from 'vue'\nimport {useStore} from 'vuex'\nimport {currency} from '../utils/currency'\n\nexport function useCartPage() {\n  const store = useStore()\n\n  const products = computed(() => store.getters['product/products'])\n\n  const title = id => products.value.find(p => p.id === id)?.title\n  const price = id => currency(products.value.find(p => p.id === id)?.price)\n  const count = id => products.value.find(p => p.id === id)?.count\n\n  const cart = store.getters['cart/cart']\n\n  const total = computed(() => {\n    return Object.keys(cart).reduce((acc, id) => {\n      return acc += products.value.find(p => p.id === id)?.price * cart[id]\n    }, 0)\n  })\n\n  const isEmpty = computed(() => Object.keys(cart).length === 0)\n\n  return {isEmpty, title, price, count, total, cart}\n}","export function pay({ amount, description, accountId, data = {} }) {\n    const widget = new cp.CloudPayments()\n\n    return new Promise((resolve, reject) => {\n        widget.pay('charge', {\n            publicId: 'test_api_00000000000000000000001',\n            currency: 'EUR',\n            skin: 'mini',\n            description,\n            amount,\n            accountId,\n            data\n        }, {\n            onSuccess(options) {\n                resolve(options)\n            },\n            onFail(reason, options) {\n                reject(reason)\n            }\n        })\n    })\n}","import { render } from \"./Cart.vue?vue&type=template&id=a6e35a12\"\nimport script from \"./Cart.vue?vue&type=script&lang=js\"\nexport * from \"./Cart.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/wendelin/Documents/Projekte/vue3-shop-demo/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import {computed} from 'vue'\nimport {useStore} from 'vuex'\n\nexport function useProductCart(defaultId) {\n  const store = useStore()\n\n  const count = computed(() => store.getters['cart/cart'][defaultId] ?? 0)\n\n  const add = (prodId) => store.commit('cart/add', prodId)\n\n  const sub = (prodId) => store.commit('cart/remove', prodId)\n\n  return {\n    count,\n    add,\n    sub\n  }\n}"],"sourceRoot":""}